---

- name: Enable internet services
  hosts: serverb.lab.example.com
  become: true

  tasks:

   - name: install latest of firewalld, httpd, mariadb-server, php, and php-mqslnd
     ansible.builtin.dnf:
       name: 
             - firewalld
             - httpd
             - mariadb-server
             - php
             - php-msqlnd
       state: latest

   - name: Ensure firewalld is enabled and running
     ansible.builtin.service:
       name: firewalld
       state: started
       enabled: yes

   - name: Ensure access to http is allowed
     ansible.posix.firewalld:
       service: http
       state: enabled
       permanent: true
       immediate: true

   - name: Ensure httpd and mariadb services are enabled and running
     ansible.builtin.services:
       name: 
             - httpd
             - mariadb-server
       state: started
       enabled: yes

